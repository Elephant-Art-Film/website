---
import type { GetStaticPaths } from 'astro';
import { getCollection, getEntry } from 'astro:content';

import MasterLayout from '@layouts/master.astro';

export const getStaticPaths = (async () => {
	const articles = await getCollection('news');
	return articles.map((article) => {
		return { params: { slug: article.slug } };
	});
}) satisfies GetStaticPaths;

const { slug } = Astro.params;
if (!slug) throw new Error('Missing slug');

const article = await getEntry<'news', string>('news', slug);
if (!article) throw new Error('Missing article');

const { Content } = await article.render();
---

<MasterLayout title={`ELEPHANT | ${article.data.title}`} description="">
	<h1 class="text-4xl font-montserrat mb-4">{article.data.title}</h1>
	<time datetime={article.data.publishDate.toISOString()} class="text-lg font-montserrat">
		{article.data.publishDate.toLocaleDateString()}
	</time>
	<article class="prose-lg lg:prose-xl my-4">
		<Content />
	</article>
</MasterLayout>
