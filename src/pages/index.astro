---
import { getCollection } from 'astro:content';

import MasterLayout from '@layouts/master.astro';
import YouTube from '@components/YouTube.astro';
import NewsCard from '@components/NewsCard.astro';

const articles = (await getCollection('news'))
	.sort((a, b) => b.data.publishDate.getTime() - a.data.publishDate.getTime())
	.slice(0, 3);
---

<MasterLayout title="ELEPHANT art film production" description="">
	<YouTube id="apyblyrlJCg" />

	<h1 class="text-4xl font-bold mt-12 mb-6">News</h1>
	{
		articles.map((article) => (
			<NewsCard
				title={article.data.title}
				slug={article.slug}
				publishDate={article.data.publishDate}
				image={{ src: article.data.image || '', alt: article.data.title }}
				description={article.data.description}
			/>
		))
	}
	<div class="text-center pt-4">
		<a href="/news" class="px-4 py-3 border-2 border-gray-600 rounded-md">More...</a>
	</div>
</MasterLayout>
